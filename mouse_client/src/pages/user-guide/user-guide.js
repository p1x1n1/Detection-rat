// src/components/UserGuide.js

import React, { useState } from 'react';
import { Layout, Menu } from 'antd';
import {
  SmileOutlined,
  UserOutlined,
  HeartOutlined,
  VideoCameraOutlined,
  TableOutlined,
  ExperimentOutlined,
} from '@ant-design/icons';


const { Sider, Content } = Layout;
const { Item: MenuItem } = Menu;

const UserGuide = () => {
  // Меняем ключ по умолчанию на "welcome"
  const [selectedKey, setSelectedKey] = useState('welcome');

  const onMenuClick = e => {
    setSelectedKey(e.key);
  };

  const renderContent = () => {
    switch (selectedKey) {
      case 'welcome':
        return (
          <>
            <h2>Добро пожаловать!</h2>
            <p>
              Вы находитесь в Руководстве пользователя. Здесь собраны все инструкции по работе с
              системой: от создания аккаунта до генерации отчётов по экспериментам. Выберите нужный
              раздел слева, чтобы ознакомиться с подробным описанием функционала.
            </p>
            <p>
              Если вы только что зарегистрировались, перейдите в раздел «Профиль» для проверки
              информации о себе. Далее можно изучить работу с животными, загрузку видео и
              управление экспериментами.
            </p>
          </>
        );

      case 'profile':
        return (
          <>
            <h2>Профиль пользователя</h2>
            <p>
              После успешного создания учётной записи автоматически инициализируется сессия и
              происходит перенаправление на страницу профиля пользователя. Профиль обеспечивает
              отображение информации о пользователе, фото профиля, карточки с отображением количества
              экспериментов, видео и лабораторных животных. В правом верхнем углу есть дополнительная
              панель навигации для перехода в профиль и выхода из него.
            </p>
          </>
        );

      case 'animals':
        return (
          <>
            <h2>Страница «Лабораторные животные»</h2>
            <p>
              На странице «Лабораторные животные» информация представлена в виде карточек. Каждая
              карточка содержит изображение животного и ключевые данные (имя, возраст, вес, окрас).
              Предусмотрена возможность сортировки по этим параметрам (имя, возраст, вес, окрас) и
              поиск по имени. В правом верхнем углу страницы расположена кнопка «Добавить новое
              животное», открывающая форму создания. Под списком карточек — навигация по страницам
              (пагинация).
            </p>
            <p>
              Внутри каждой карточки доступны ссылки на связанные видео (если они есть), а также
              кнопки «Редактировать» и «Удалить» для управления информацией о конкретном животном.
            </p>
          </>
        );

      case 'videos':
        return (
          <>
            <h2>Страница «Видео»</h2>
            <p>
              Страница «Видео» отображает список карточек с ключевыми данными: названием ролика,
              описанием, длительностью, датой проведения эксперимента и связанным лабораторным
              животным. Пользователь может сортировать список по названию, дате проведения или по
              имени лабораторного животного, а также искать видео по названию.
            </p>
            <p>
              Кнопка «Загрузить видео» переводит на форму добавления новой записи. В ней необходимо
              указать:
              <ul>
                <li>Название видеозаписи;</li>
                <li>Описание;</li>
                <li>Дату проведения эксперимента;</li>
                <li>Выбрать лабораторное животное (из существующих);</li>
                <li>Указать, является ли экспериментальным;</li>
                <li>Загрузить файл с видео.</li>
              </ul>
              Перед отправкой формы выполняется предпросмотр загруженного видео и выбранного
              лабораторного животного.
            </p>
            <p>
              При клике на любую карточку видео открывается страница детального просмотра. Слева
              расположена карточка с:
              <ul>
                <li>Название ролика;</li>
                <li>Описание;</li>
                <li>Длительность;</li>
                <li>Дата проведения;</li>
                <li>Встроенный плеер для просмотра.</li>
              </ul>
              Ниже — карточка связанного лабораторного животного с указанием его типа (контрольное/
              экспериментальное) и изображением.
            </p>
            <p>
              Справа от плеера размещена таблица, в которой перечислены связанные с этим видео
              эксперименты. Колонки таблицы:
              <ul>
                <li>Название эксперимента;</li>
                <li>Описание;</li>
                <li>Статус.</li>
              </ul>
            </p>
            <p>
              В нижнем левом углу страницы видео-деталей находится панель с кнопками «Редактировать»
              и «Удалить» текущую видеозапись.
            </p>
          </>
        );

      case 'metrics':
        return (
          <>
            <h2>Страница «Показатели»</h2>
            <p>
              Страница «Показатели» является справочной и представлена в виде таблицы. В таблице
              перечислены все названия показателей, которые можно указать при проведении эксперимента в
              системе. Пользователь видит только список доступных параметров — их названия и, при
              необходимости, краткое описание. Здесь нельзя выполнять CRUD-операции; цель страницы —
              показать, какие показатели поддерживаются в системе для дальнейшего использования в
              экспериментах.
            </p>
          </>
        );

      case 'experiments':
        return (
          <>
            <h2>Страница «Эксперименты»</h2>
            <p>
              На странице «Эксперименты» отображается таблица (или коллекция карточек) экспериментов
              с пагинацией. В верхней части страницы, слева:
              <ul>
                <li>Поле для поиска по названию эксперимента;</li>
                <li>Выпадающий список для сортировки по названию, дате проведения, дате завершения или
                  статусу.</li>
              </ul>
              Справа расположены табы для быстрого фильтра по статусам: «Все», «Анализ» и
              «Завершенные». Также на этой же панели находится кнопка «Добавить эксперимент», которая
              переводит на форму создания нового эксперимента.
            </p>
            <p>
              Каждый эксперимент в списке представлен в виде карточки или строкой таблицы, содержащей:
              <ul>
                <li>Название эксперимента;</li>
                <li>Дата проведения — дата завершения;</li>
                <li>Статус эксперимента;</li>
                <li>Список показателей, которые будут измеряться;</li>
                <li>Список видео, связанных с экспериментом: для каждого видео указывается название,
                  статус и информация о лабораторном животном (тип: контрольное или экспериментальное).
                </li>
              </ul>
            </p>
            <p>
              При наведении на строку (или карточку) появляются иконки для «Редактировать» и «Удалить»
              этой записи. В заголовке таблицы есть чекбокс для выбора всех экспериментов на
              странице (массовые действия).
            </p>
            <p>
              В зависимости от статуса эксперимента в нижней части карточки динамически отображаются
              кнопки действий:
              <ul>
                <li>
                  <strong>Статус «Создан»:</strong> кнопка «Начать интеллектуальный анализ». При
                  нажатии эксперимент переводится в статус «Анализ», а все связанные видео переходят
                  либо в статус «В очереди», либо «В процессе» (в зависимости от текущей загруженности
                  сервиса анализа).
                </li>
                <li>
                  <strong>Статус «Анализ»:</strong> кнопка «Прекратить анализ», которая переводит
                  эксперимент и все связанные видео в статус «Анализ прекращён».
                </li>
                <li>
                  <strong>Статусы «Ошибка во время выполнения» или «Анализ прекращён»:</strong>{' '}
                  кнопка «Повторить интеллектуальный анализ», которая выполняет те же действия, что и
                  «Начать интеллектуальный анализ» (эксперимент возвращается в статус «Анализ», а
                  видео — в очередь или в процесс).
                </li>
                <li>
                  <strong>Статусы «Успешно завершено» или «Частично успешно завершено»:</strong>{' '}
                  аналогично предыдущим (кнопка «Повторить интеллектуальный анализ»), а дополнительно
                  появляется кнопка «Сформировать отчёт», ведущая на страницу «Отчёт».
                </li>
              </ul>
            </p>
          </>
        );

      case 'experiment':
        return (
          <>
            <h2>Страница «Эксперимент (детально)»</h2>
            <p>
              Страница «Эксперимент» состоит из двух основных блоков:
              <ol>
                <li>
                  <strong>Верхний блок:</strong> карточка с общей информацией об эксперименте:
                  <ul>
                    <li>Название;</li>
                    <li>Описание.</li>
                  </ul>
                </li>
                <li>
                  <strong>Нижний блок:</strong> список видеозаписей, связанных с этим экспериментом.
                  Он реализован с постраничным просмотром (пагинация). Каждый элемент списка устроен
                  в виде двух колонок:
                  <ul>
                    <li>
                      <strong>Левая колонка:</strong> базовая информация о видеозаписи (название,
                      краткое описание).
                    </li>
                    <li>
                      <strong>Правая колонка:</strong> отображает содержимое в зависимости от
                      статуса видеозаписи:
                      <ul>
                        <li>
                          Если статус «Успешно завершено»: в верхней части правой колонки показывается
                          результирующее видео в виде карточки с плеером и кнопкой «Скачать
                          результирующее видео». Под ним перечислены показатели (каждый в отдельной
                          карточке). Карточка каждого показателя содержит:
                          <ul>
                            <li>Название показателя;</li>
                            <li>Значение;</li>
                            <li>Комментарий;</li>
                            <li>Для временных показателей — время начала и окончания измерения.</li>
                          </ul>
                          По умолчанию видны первые три показателя. Ниже находится кнопка «Показать
                          все», которая раскрывает полный список. После этого вместо неё
                          отображается «Скрыть лишние показатели», возвращающая к виду с тремя
                          показателями.
                        </li>
                        <li>
                          Если статус отличается от «Успешно завершено»: вместо результатов появляется
                          предупреждение «Данные и результат будут доступны после завершения анализа
                          видео.»
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ol>
            </p>
          </>
        );

      case 'report':
        return (
          <>
            <h2>Страница «Отчёт»</h2>
            <p>
              Страница «Отчёт» представлена в виде таблицы с итоговыми данными по эксперименту. В
              таблице для каждой видеозаписи указаны:
              <ul>
                <li>Тип лабораторного животного («Экспериментальное» или «Контрольное»);</li>
                <li>Список всех принятых в расчёт показателей и их значения.</li>
              </ul>
              Также пользователь может добавить дополнительные столбцы:
              <ul>
                <li>О связанных видеозаписях (например, добавить колонку «Название видео»);</li>
                <li>Дополнительные характеристики животного (например, «Возраст», «Вес»).</li>
              </ul>
            </p>
            <p>
              В правом верхнем углу имеется кнопка «Скачать отчёт в формате Excel». При её нажатии
              формируется файл Excel, содержащий текущую версию таблицы со всеми выбранными колонками
              и данными, и автоматически начинается загрузка.
            </p>
          </>
        );

      default:
        return null;
    }
  };

  return (
    <Layout style={{ minHeight: '100vh' }}>
      <Sider
        width={250}
        style={{ background: '#0D47A1' }}
        breakpoint="md"
        collapsedWidth={0}
      >
        <div
          style={{
            height: 64,
            margin: '16px',
            color: '#fff',
            fontSize: 20,
            textAlign: 'center',
          }}
        >
          Руководство
        </div>

        <Menu
          mode="inline"
          theme="dark"
          selectedKeys={[selectedKey]}
          onClick={onMenuClick}
          style={{ border: 'none', background: 'transparent' }}
        >
          <MenuItem key="welcome">
            <SmileOutlined />
            <span>Добро пожаловать!</span>
          </MenuItem>

          <MenuItem key="profile">
            <UserOutlined />
            <span>Профиль</span>
          </MenuItem>

          <MenuItem key="animals">
            <HeartOutlined />
            <span>Лабораторные животные</span>
          </MenuItem>

          <MenuItem key="videos">
            <VideoCameraOutlined />
            <span>Видео</span>
          </MenuItem>

          <MenuItem key="metrics">
            <TableOutlined />
            <span>Показатели</span>
          </MenuItem>

          <MenuItem key="experiments">
            <ExperimentOutlined />
            <span>Эксперименты</span>
          </MenuItem>

          <MenuItem key="experiment" style={{ paddingLeft: 40, fontStyle: 'italic' }}>
            • Эксперимент (детально)
          </MenuItem>

          <MenuItem key="report" style={{ paddingLeft: 40, fontStyle: 'italic' }}>
            • Отчёт
          </MenuItem>
        </Menu>
      </Sider>

      <Layout>
        <Content
          style={{
            margin: '24px',
            padding: '24px',
            background: '#fff',
            overflowY: 'auto',
          }}
        >
          {renderContent()}
        </Content>
      </Layout>
    </Layout>
  );
};

export default UserGuide;
